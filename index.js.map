{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getPosts(query, page = 1) {\n  const API_KEY = \"48269176-9eacf4bd75a8a580043143bd0\";\n  const URL = `https://pixabay.com/api/`;\n\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: page,\n        per_page: 15,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    throw new Error(`Something went wrong: ${error.message}`);\n  }\n}\n","export function postTemplate(post) {\n  return `\n    <li class=\"gallery-item\">\n      <a href=\"${post.largeImageURL}\">\n        <img src=\"${post.webformatURL}\" alt=\"${post.tags}\" class=\"gallery-item-image\" />\n        <div class=\"info\">\n          <p class=\"info-title\">Likes:<span class=\"info-value\">${post.likes}</span></p>\n          <p class=\"info-title\">Views:<span class=\"info-value\">${post.views}</span></p>\n          <p class=\"info-title\">Comments:<span class=\"info-value\">${post.comments}</span></p>\n          <p class=\"info-title\">Downloads:<span class=\"info-value\">${post.downloads}</span></p>\n        </div>\n      </a>\n    </li>\n  `;\n}\n\nexport function postsTemplate(arr) {\n  return arr.map(postTemplate).join(\"\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getPosts } from \"./js/pixabay-api\";\nimport { postsTemplate } from \"./js/render-functions\";\n\nconst form = document.querySelector(\".search-form\");\nconst postsGallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet searchQuery = \"\";\n\nhideLoader();\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  searchQuery = event.target.elements.searchQuery.value.trim();\n\n  if (!searchQuery) {\n    iziToast.info({\n      title: \"No data\",\n      message: \"Please enter a search query\",\n    });\n    return;\n  }\n\n  postsGallery.innerHTML = \"\";\n  currentPage = 1;\n  showLoader();\n\n  try {\n    const data = await getPosts(searchQuery, currentPage);\n\n    if (!data.hits.length) {\n      iziToast.error({\n        title: \"No result\",\n        message: \"Sorry, no images matching your search query. Please try again!\",\n      });\n      hideLoader();\n      return;\n    }\n\n    const markup = postsTemplate(data.hits);\n    postsGallery.insertAdjacentHTML(\"beforeend\", markup);\n    const lightbox = new SimpleLightbox(\".gallery a\");\n    lightbox.refresh();\n\n    if (data.totalHits > currentPage * 15) {\n      loadMoreButton.style.display = \"block\";\n    }\n\n  } catch (error) {\n    iziToast.warning({\n      title: \"Error\",\n      message: `Something went wrong. ${error.message}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await getPosts(searchQuery, currentPage);\n    const markup = postsTemplate(data.hits);\n    postsGallery.insertAdjacentHTML(\"beforeend\", markup);\n    const lightbox = new SimpleLightbox(\".gallery a\");\n    lightbox.refresh();\n\n    if (data.totalHits <= currentPage * 15) {\n      loadMoreButton.style.display = \"none\";\n      iziToast.info({\n        title: \"End of results\",\n        message: \"Sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    window.scrollBy({\n      top: window.innerHeight, // Scroll by one page height\n      behavior: \"smooth\",\n    });\n\n  } catch (error) {\n    iziToast.warning({\n      title: \"Error\",\n      message: `Something went wrong. ${error.message}`,\n    });\n  } finally {\n    hideLoader();\n  }\n});\n\nfunction showLoader() {\n  loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n  loader.style.display = \"none\";\n}\n"],"names":["getPosts","query","page","API_KEY","URL","axios","error","postTemplate","post","postsTemplate","arr","form","postsGallery","loader","loadMoreButton","currentPage","searchQuery","hideLoader","event","iziToast","showLoader","data","markup","SimpleLightbox"],"mappings":"+vBAEO,eAAeA,EAASC,EAAOC,EAAO,EAAG,CAC9C,MAAMC,EAAU,qCACVC,EAAM,2BAEZ,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAID,EAAK,CACpC,OAAQ,CACN,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACP,CAAK,GAEe,IACjB,OAAQI,EAAO,CACd,MAAM,IAAI,MAAM,yBAAyBA,EAAM,OAAO,EAAE,CACzD,CACH,CCvBO,SAASC,EAAaC,EAAM,CACjC,MAAO;AAAA;AAAA,iBAEQA,EAAK,aAAa;AAAA,oBACfA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA,iEAESA,EAAK,KAAK;AAAA,iEACVA,EAAK,KAAK;AAAA,oEACPA,EAAK,QAAQ;AAAA,qEACZA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA,GAKnF,CAEO,SAASC,EAAcC,EAAK,CACjC,OAAOA,EAAI,IAAIH,CAAY,EAAE,KAAK,EAAE,CACtC,CCXA,MAAMI,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAe,SAAS,cAAc,UAAU,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAIC,EAAc,EACdC,EAAc,GAElBC,IAEAN,EAAK,iBAAiB,SAAU,MAAOO,GAAU,CAI/C,GAHAA,EAAM,eAAc,EACpBF,EAAcE,EAAM,OAAO,SAAS,YAAY,MAAM,OAElD,CAACF,EAAa,CAChBG,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,6BACf,CAAK,EACD,MACD,CAEDP,EAAa,UAAY,GACzBG,EAAc,EACdK,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMrB,EAASgB,EAAaD,CAAW,EAEpD,GAAI,CAACM,EAAK,KAAK,OAAQ,CACrBF,EAAS,MAAM,CACb,MAAO,YACP,QAAS,gEACjB,CAAO,EACDF,IACA,MACD,CAED,MAAMK,EAASb,EAAcY,EAAK,IAAI,EACtCT,EAAa,mBAAmB,YAAaU,CAAM,EAClC,IAAIC,EAAe,YAAY,EACvC,QAAO,EAEZF,EAAK,UAAYN,EAAc,KACjCD,EAAe,MAAM,QAAU,QAGlC,OAAQR,EAAO,CACda,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,yBAAyBb,EAAM,OAAO,EACrD,CAAK,CACL,QAAY,CACRW,GACD,CACH,CAAC,EAEDH,EAAe,iBAAiB,QAAS,SAAY,CACnDC,GAAe,EACfK,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMrB,EAASgB,EAAaD,CAAW,EAC9CO,EAASb,EAAcY,EAAK,IAAI,EACtCT,EAAa,mBAAmB,YAAaU,CAAM,EAClC,IAAIC,EAAe,YAAY,EACvC,QAAO,EAEZF,EAAK,WAAaN,EAAc,KAClCD,EAAe,MAAM,QAAU,OAC/BK,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,sDACjB,CAAO,GAGH,OAAO,SAAS,CACd,IAAK,OAAO,YACZ,SAAU,QAChB,CAAK,CAEF,OAAQb,EAAO,CACda,EAAS,QAAQ,CACf,MAAO,QACP,QAAS,yBAAyBb,EAAM,OAAO,EACrD,CAAK,CACL,QAAY,CACRW,GACD,CACH,CAAC,EAED,SAASG,GAAa,CACpBP,EAAO,MAAM,QAAU,OACzB,CAEA,SAASI,GAAa,CACpBJ,EAAO,MAAM,QAAU,MACzB"}